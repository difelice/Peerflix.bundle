import os
import pipes
import time

from subprocess import Popen, PIPE

global proc
proc = None

def start(magnet):
	global proc

	Log.Debug('/usr/local/bin/peerflix ' + pipes.quote(magnet) + ' --quiet')

	try:
		Log.Debug('Terminate')
		proc.kill();
		time.sleep(4)
	except:
		Log.Debug('Could not terminate')

	proc = Popen(
		'/usr/local/bin/peerflix ' + pipes.quote(magnet) + ' -p 8077 -h localhost',
		stderr = PIPE,
		stdout = PIPE,
		shell = True
	)

	time.sleep(5)

	return None